<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—á–µ—Ç—á–∏–∫ –∫–∞–ª–æ—Ä–∏–π (–†–µ—Ü–µ–ø—Ç)</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üçΩÔ∏è</text></svg>">
    <style>
        :root {
            --primary-color: #4a90e2;
            --bg-color: #f5f7fa;
            --card-bg: #ffffff;
            --text-color: #333;
            --border-color: #e1e4e8;
            --danger-color: #e74c3c;
            --warning-bg: #fff3cd;
            --warning-text: #856404;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 24px;
        }

        h1 {
            text-align: center;
            margin-bottom: 24px;
            font-weight: 600;
            color: var(--text-color);
        }

        /* Grid Layout */
        .grid-container {
            display: grid;
            grid-template-columns: minmax(200px, 3fr) 90px 70px 60px 60px 60px 40px;
            gap: 12px;
            align-items: center;
        }

        .header-row {
            font-weight: 600;
            color: #666;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 12px;
            margin-bottom: 12px;
            text-align: center;
        }
        
        .header-row span:first-child {
            text-align: left;
        }

        .product-row {
            margin-bottom: 8px;
            position: relative; /* For autocomplete positioning */
        }

        .product-row input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 14px;
            box-sizing: border-box;
            transition: border-color 0.2s;
        }

        .product-row input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .product-row input[readonly] {
            background-color: #f8f9fa;
            border: none;
            text-align: center;
            font-weight: 500;
            color: #555;
        }

        .product-row input.warning {
            background-color: var(--warning-bg);
            color: var(--warning-text);
        }

        .btn-delete {
            background: none;
            border: none;
            color: #aaa;
            cursor: pointer;
            font-size: 18px;
            transition: color 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .btn-delete:hover {
            color: var(--danger-color);
        }

        .controls {
            margin-top: 20px;
            border-top: 2px solid var(--border-color);
            padding-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .btn-add {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            align-self: flex-start;
            transition: opacity 0.2s;
        }

        .btn-add:hover {
            opacity: 0.9;
        }

        .summary-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-top: 10px;
        }
        
        .summary-card {
            background: #f8f9fa;
            padding: 16px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .summary-title {
            font-weight: 600;
            margin-bottom: 12px;
            color: #555;
            display: block;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .summary-value {
            font-weight: 600;
        }

        .cooked-weight-container {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .cooked-weight-input {
            width: 100px;
            padding: 8px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-weight: bold;
        }

        /* Autocomplete */
        .autocomplete-items {
            position: absolute;
            border: 1px solid #d4d4d4;
            border-bottom: none;
            border-top: none;
            z-index: 99;
            top: 100%;
            left: 0;
            right: 0;
            max-width: 100%; /* Match input width */
            max-height: 200px;
            overflow-y: auto;
            background-color: white;
            border-radius: 0 0 6px 6px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .autocomplete-items div {
            padding: 10px;
            cursor: pointer;
            background-color: #fff;
            border-bottom: 1px solid #d4d4d4;
        }

        .autocomplete-items div:hover {
            background-color: #e9e9e9;
        }

        .autocomplete-active {
            background-color: DodgerBlue !important; 
            color: #ffffff; 
        }

        /* Mobile adaptation */
        @media (max-width: 768px) {
            .grid-container {
                grid-template-columns: 1fr 70px 40px; /* Simplified for mobile */
                gap: 8px;
            }
            .header-row span:nth-child(n+4), 
            .product-row input:nth-child(n+4) {
                display: none; /* Hide detailed macros on very small screens or make scrollable */
            }
        }

        /* Footer & Help Section */
        footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            font-size: 14px;
            color: #777;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 24px;
        }

        .footer-link {
            cursor: pointer;
            text-decoration: underline;
            color: var(--primary-color);
            background: none;
            border: none;
            font-size: inherit;
            padding: 0;
        }

        .help-content {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border: 1px solid var(--border-color);
            line-height: 1.6;
            color: var(--text-color);
        }

        .help-content ul {
            padding-left: 20px;
            margin: 10px 0;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç–∏</h1>

    <div class="grid-container header-row">
        <span>–ü—Ä–æ–¥—É–∫—Ç</span>
        <span>–í–µ—Å (–≥)</span>
        <span>–ö–∫–∞–ª</span>
        <span>–ë</span>
        <span>–ñ</span>
        <span>–£</span>
        <span></span>
    </div>

    <div id="products-list">
        <!-- Rows will be injected here -->
    </div>

    <div class="controls">
        <button class="btn-add" id="add-btn">+ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç</button>

        <div class="summary-section">
            <!-- Total Ingredients -->
            <div class="summary-card">
                <span class="summary-title">–ò—Ç–æ–≥–æ (–°—ã—Ä—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã)</span>
                <div class="summary-row">
                    <span>–í–µ—Å:</span>
                    <span id="total-raw-weight" class="summary-value">0 –≥</span>
                </div>
                <div class="summary-row">
                    <span>–ö–∫–∞–ª:</span>
                    <span id="total-kcal" class="summary-value">0</span>
                </div>
                <div class="summary-row">
                    <span>–ë / –ñ / –£:</span>
                    <span class="summary-value">
                        <span id="total-p">0</span> / 
                        <span id="total-f">0</span> / 
                        <span id="total-c">0</span>
                    </span>
                </div>
            </div>

            <!-- Final Dish (Per 100g) -->
            <div class="summary-card" style="background-color: #e3f2fd; border-color: #90caf9;">
                <span class="summary-title">–ì–æ—Ç–æ–≤–æ–µ –±–ª—é–¥–æ (–Ω–∞ 100–≥)</span>
                
                <div class="cooked-weight-container">
                    <label for="cooked-weight">–í–µ—Å –≥–æ—Ç–æ–≤–æ–≥–æ –±–ª—é–¥–∞ (–≥):</label>
                    <input type="number" id="cooked-weight" class="cooked-weight-input" placeholder="–ù–µ —É–∫–∞–∑–∞–Ω">
                </div>

                <div class="summary-row">
                    <span>–ö–∫–∞–ª:</span>
                    <span id="final-kcal" class="summary-value" style="font-size: 1.2em; color: var(--primary-color);">0</span>
                </div>
                <div class="summary-row">
                    <span>–ë / –ñ / –£:</span>
                    <span class="summary-value">
                        <span id="final-p">0</span> / 
                        <span id="final-f">0</span> / 
                        <span id="final-c">0</span>
                    </span>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-links">
            <button class="footer-link" id="help-toggle">‚ùì –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?</button>
            <button class="footer-link" id="error-toggle">üêû –ù–∞—à–ª–∏ –æ—à–∏–±–∫—É?</button>
            <button class="footer-link" id="idea-toggle">üí° –ï—Å—Ç—å –∏–¥–µ—è?</button>
        </div>

        <div id="help-section" class="help-content" style="display: none;">
            <strong>–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</strong>
            <ul>
                <li><strong>–ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä:</strong> –ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç –∏–∑ –±–∞–∑—ã.</li>
                <li><strong>–°–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è:</strong> –ú–æ–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ <code>–ù–∞–∑–≤–∞–Ω–∏–µ (–ö–∫–∞–ª/–ë/–ñ/–£)</code>, –Ω–∞–ø—Ä–∏–º–µ—Ä: <i>–°—É–ø (150/5/3/10)</i>.</li>
                <li><strong>–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:</strong> –í–≤–µ–¥–∏—Ç–µ <code>–ù–∞–∑–≤–∞–Ω–∏–µ (–ö–∫–∞–ª)</code>, —á—Ç–æ–±—ã –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –ë–ñ–£ –ø—Ä–æ–¥—É–∫—Ç–∞ –∏–∑ –±–∞–∑—ã –ø–æ–¥ –Ω—É–∂–Ω—É—é –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å.</li>
                <li><strong>–ì–æ—Ç–æ–≤–æ–µ –±–ª—é–¥–æ:</strong> –£–∫–∞–∂–∏—Ç–µ –≤–µ—Å –ø–æ—Å–ª–µ –≥–æ—Ç–æ–≤–∫–∏, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å 100–≥ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞.</li>
                <li><strong>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:</strong> –°—Å—ã–ª–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äî –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ—ë, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç.</li>
            </ul>
        </div>
    </footer>
</div>

<script>
    // --- Database ---
    const DB = [
        // --- –ö–†–£–ü–´, –ú–ê–ö–ê–†–û–ù–´, –ë–û–ë–û–í–´–ï (–°—É—Ö–æ–π –≤–µ—Å) ---
        { name: "–ì—Ä–µ—á–∫–∞ (—è–¥—Ä–∏—Ü–∞)", protein: 12.6, fat: 3.3, carbs: 62.1, kcal: 313 },
        { name: "–ì—Ä–µ—á–∫–∞ –∑–µ–ª–µ–Ω–∞—è", protein: 13, fat: 3.4, carbs: 61, kcal: 310 },
        { name: "–†–∏—Å –±–µ–ª—ã–π (—à–ª–∏—Ñ–æ–≤–∞–Ω–Ω—ã–π)", protein: 7, fat: 0.6, carbs: 77.3, kcal: 344 },
        { name: "–†–∏—Å –ë–∞—Å–º–∞—Ç–∏", protein: 7.5, fat: 2.6, carbs: 76, kcal: 350 },
        { name: "–†–∏—Å –±—É—Ä—ã–π (–Ω–µ—à–ª–∏—Ñ–æ–≤–∞–Ω–Ω—ã–π)", protein: 7.4, fat: 2.2, carbs: 72, kcal: 337 },
        { name: "–†–∏—Å –∫—Ä–∞—Å–Ω—ã–π", protein: 7.5, fat: 2.5, carbs: 69, kcal: 330 },
        { name: "–†–∏—Å –¥–∏–∫–∏–π", protein: 14, fat: 0.5, carbs: 70, kcal: 340 },
        { name: "–û–≤—Å—è–Ω–∫–∞ (–≥–µ—Ä–∫—É–ª–µ—Å)", protein: 12.3, fat: 6.1, carbs: 59.5, kcal: 342 },
        { name: "–û–≤—Å—è–Ω–∫–∞ (–¥–ª–∏—Ç–µ–ª—å–Ω–æ–π –≤–∞—Ä–∫–∏)", protein: 13, fat: 6.5, carbs: 60, kcal: 350 },
        { name: "–ö–∏–Ω–æ–∞", protein: 14.1, fat: 6.1, carbs: 57.2, kcal: 368 },
        { name: "–ë—É–ª–≥—É—Ä", protein: 12.3, fat: 1.3, carbs: 57.6, kcal: 342 },
        { name: "–ö—É—Å–∫—É—Å", protein: 12, fat: 0.6, carbs: 77, kcal: 376 },
        { name: "–ü—à–µ–Ω–æ", protein: 11.5, fat: 3.3, carbs: 66.5, kcal: 348 },
        { name: "–ü–µ—Ä–ª–æ–≤–∫–∞", protein: 9.3, fat: 1.1, carbs: 66.9, kcal: 320 },
        { name: "–ü–æ–ª–±–∞", protein: 14.5, fat: 2.4, carbs: 61, kcal: 339 },
        { name: "–ú–∞–∫–∞—Ä–æ–Ω—ã (—Ç–≤–µ—Ä–¥—ã–µ —Å–æ—Ä—Ç–∞)", protein: 10.4, fat: 1.1, carbs: 71.5, kcal: 344 },
        { name: "–ú–∞–∫–∞—Ä–æ–Ω—ã (—Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤—ã–µ)", protein: 13, fat: 2.5, carbs: 65, kcal: 350 },
        { name: "–ß–µ—á–µ–≤–∏—Ü–∞ –∫—Ä–∞—Å–Ω–∞—è", protein: 24, fat: 1.5, carbs: 46, kcal: 314 },
        { name: "–ß–µ—á–µ–≤–∏—Ü–∞ –∑–µ–ª–µ–Ω–∞—è", protein: 24.5, fat: 1.2, carbs: 50, kcal: 325 },
        { name: "–ù—É—Ä–∏ (—Ç—É—Ä–µ—Ü–∫–∏–π –≥–æ—Ä–æ—Ö)", protein: 20.1, fat: 4.3, carbs: 46.2, kcal: 309 },
        { name: "–§–∞—Å–æ–ª—å –∫—Ä–∞—Å–Ω–∞—è", protein: 22, fat: 1.5, carbs: 48, kcal: 310 },
        { name: "–§–∞—Å–æ–ª—å –±–µ–ª–∞—è", protein: 22.3, fat: 1.7, carbs: 45, kcal: 300 },
        { name: "–ì–æ—Ä–æ—Ö –∫–æ–ª–æ—Ç—ã–π", protein: 20.5, fat: 2, carbs: 49.5, kcal: 298 },
        { name: "–ú–∞—à (–±–æ–±—ã –º—É–Ω–≥)", protein: 23.5, fat: 2, carbs: 46, kcal: 300 },
        { name: "–°–æ—è (–±–æ–±—ã)", protein: 34.9, fat: 17.3, carbs: 17.3, kcal: 381 },

        // --- –ú–Ø–°–û –ò –ü–¢–ò–¶–ê (–°—ã—Ä–æ–µ) ---
        { name: "–ö—É—Ä–∏–Ω–æ–µ —Ñ–∏–ª–µ (–≥—Ä—É–¥–∫–∞)", protein: 23.6, fat: 1.9, carbs: 0.4, kcal: 113 },
        { name: "–ö—É—Ä–∏–Ω–æ–µ –±–µ–¥—Ä–æ (–±–µ–∑ –∫–æ–∂–∏)", protein: 19.7, fat: 8.5, carbs: 0, kcal: 160 },
        { name: "–ö—É—Ä–∏–Ω–∞—è –≥–æ–ª–µ–Ω—å (–±–µ–∑ –∫–æ–∂–∏)", protein: 18.5, fat: 7, carbs: 0, kcal: 145 },
        { name: "–ö—É—Ä–∏–Ω—ã–µ –∫—Ä—ã–ª—å—è", protein: 18, fat: 15, carbs: 0, kcal: 210 },
        { name: "–ò–Ω–¥–µ–π–∫–∞ (—Ñ–∏–ª–µ –≥—Ä—É–¥–∫–∏)", protein: 23, fat: 1.5, carbs: 0, kcal: 110 },
        { name: "–ò–Ω–¥–µ–π–∫–∞ (—Ñ–∏–ª–µ –±–µ–¥—Ä–∞)", protein: 19, fat: 5, carbs: 0, kcal: 144 },
        { name: "–ì–æ–≤—è–¥–∏–Ω–∞ (–ø–æ—Å—Ç–Ω–∞—è)", protein: 20, fat: 3.5, carbs: 0, kcal: 115 },
        { name: "–ì–æ–≤—è–¥–∏–Ω–∞ (–≤—ã—Ä–µ–∑–∫–∞)", protein: 20, fat: 8, carbs: 0, kcal: 158 },
        { name: "–ì–æ–≤—è–¥–∏–Ω–∞ (—Ñ–∞—Ä—à –ø–æ—Å—Ç–Ω—ã–π)", protein: 19, fat: 10, carbs: 0, kcal: 170 },
        { name: "–¢–µ–ª—è—Ç–∏–Ω–∞", protein: 19.7, fat: 1.2, carbs: 0, kcal: 97 },
        { name: "–ö—Ä–æ–ª–∏–∫", protein: 21, fat: 8, carbs: 0, kcal: 156 },
        { name: "–ü–µ—á–µ–Ω—å –∫—É—Ä–∏–Ω–∞—è", protein: 19, fat: 6.3, carbs: 0.6, kcal: 137 },
        { name: "–ü–µ—á–µ–Ω—å –≥–æ–≤—è–∂—å—è", protein: 17.4, fat: 3.1, carbs: 0, kcal: 98 },
        { name: "–°–µ—Ä–¥–µ—á–∫–∏ –∫—É—Ä–∏–Ω—ã–µ", protein: 16, fat: 10, carbs: 0.5, kcal: 159 },
        { name: "–ñ–µ–ª—É–¥–∫–∏ –∫—É—Ä–∏–Ω—ã–µ", protein: 18, fat: 2, carbs: 0.6, kcal: 95 },
        { name: "–°–≤–∏–Ω–∏–Ω–∞ (–≤—ã—Ä–µ–∑–∫–∞)", protein: 19, fat: 7, carbs: 0, kcal: 143 },
        { name: "–°–≤–∏–Ω–∏–Ω–∞ (–∫–∞—Ä–±–æ–Ω–∞–¥)", protein: 16, fat: 8, carbs: 0, kcal: 135 },
        { name: "–ë–∞—Ä–∞–Ω–∏–Ω–∞ (–Ω–µ–∂–∏—Ä–Ω–∞—è)", protein: 16.5, fat: 15, carbs: 0, kcal: 203 },
        { name: "–£—Ç–∫–∞ (—Ñ–∏–ª–µ –±–µ–∑ –∫–æ–∂–∏)", protein: 19, fat: 6, carbs: 0, kcal: 135 },

        // --- –†–´–ë–ê –ò –ú–û–†–ï–ü–†–û–î–£–ö–¢–´ (–°—ã—Ä–æ–µ) ---
        { name: "–õ–æ—Å–æ—Å—å (—Å–µ–º–≥–∞)", protein: 20, fat: 15, carbs: 0, kcal: 220 },
        { name: "–§–æ—Ä–µ–ª—å", protein: 19, fat: 5, carbs: 0, kcal: 121 },
        { name: "–ì–æ—Ä–±—É—à–∞", protein: 20.5, fat: 6.5, carbs: 0, kcal: 142 },
        { name: "–ö–µ—Ç–∞", protein: 19, fat: 5.6, carbs: 0, kcal: 127 },
        { name: "–¢—É–Ω–µ—Ü (—Ñ–∏–ª–µ)", protein: 24, fat: 1, carbs: 0, kcal: 101 },
        { name: "–¢—Ä–µ—Å–∫–∞", protein: 17.5, fat: 0.2, carbs: 0, kcal: 73 },
        { name: "–ú–∏–Ω—Ç–∞–π", protein: 16, fat: 0.9, carbs: 0, kcal: 72 },
        { name: "–•–µ–∫", protein: 16.5, fat: 1.8, carbs: 0, kcal: 86 },
        { name: "–¢–∏–ª–∞–ø–∏—è", protein: 20, fat: 1.7, carbs: 0, kcal: 96 },
        { name: "–°—É–¥–∞–∫", protein: 18.4, fat: 1.1, carbs: 0, kcal: 84 },
        { name: "–°–∫—É–º–±—Ä–∏—è", protein: 18, fat: 13, carbs: 0, kcal: 191 },
        { name: "–°–µ–ª—å–¥—å (—Å–≤–µ–∂–∞—è)", protein: 17.7, fat: 19.5, carbs: 0, kcal: 248 },
        { name: "–ö–∞–º–±–∞–ª–∞", protein: 16, fat: 3, carbs: 0, kcal: 90 },
        { name: "–ö—Ä–µ–≤–µ—Ç–∫–∏", protein: 19, fat: 1.5, carbs: 0, kcal: 95 },
        { name: "–ö–∞–ª—å–º–∞—Ä (—Ñ–∏–ª–µ)", protein: 18, fat: 2.2, carbs: 2, kcal: 100 },
        { name: "–ú–∏–¥–∏–∏", protein: 11.5, fat: 2, carbs: 3.3, kcal: 77 },
        { name: "–ú–æ—Ä—Å–∫–æ–π –∫–æ–∫—Ç–µ–π–ª—å", protein: 15, fat: 1.5, carbs: 1, kcal: 85 },
        { name: "–ò–∫—Ä–∞ –∫—Ä–∞—Å–Ω–∞—è", protein: 32, fat: 15, carbs: 0, kcal: 263 },
        { name: "–ü–µ—á–µ–Ω—å —Ç—Ä–µ—Å–∫–∏ (–∫–æ–Ω—Å–µ—Ä–≤—ã)", protein: 4, fat: 66, carbs: 0, kcal: 613 },
        { name: "–¢—É–Ω–µ—Ü –≤ —Å/—Å (–∫–æ–Ω—Å–µ—Ä–≤—ã)", protein: 21, fat: 1, carbs: 0, kcal: 96 },

        // --- –ú–û–õ–û–ß–ù–´–ï –ü–†–û–î–£–ö–¢–´ –ò –Ø–ô–¶–ê ---
        { name: "–Ø–π—Ü–æ –∫—É—Ä–∏–Ω–æ–µ", protein: 12.7, fat: 10.9, carbs: 0.7, kcal: 157 },
        { name: "–ë–µ–ª–æ–∫ —è–∏—á–Ω—ã–π", protein: 11, fat: 0, carbs: 0, kcal: 44 },
        { name: "–ñ–µ–ª—Ç–æ–∫ —è–∏—á–Ω—ã–π", protein: 16, fat: 31, carbs: 1, kcal: 352 },
        { name: "–Ø–π—Ü–æ –ø–µ—Ä–µ–ø–µ–ª–∏–Ω–æ–µ", protein: 11.9, fat: 13.1, carbs: 0.6, kcal: 168 },
        { name: "–¢–≤–æ—Ä–æ–≥ 0% (–æ–±–µ–∑–∂–∏—Ä–µ–Ω–Ω—ã–π)", protein: 18, fat: 0.5, carbs: 1.8, kcal: 85 },
        { name: "–¢–≤–æ—Ä–æ–≥ 2%", protein: 18, fat: 2, carbs: 1.8, kcal: 103 },
        { name: "–¢–≤–æ—Ä–æ–≥ 5%", protein: 17.2, fat: 5, carbs: 1.8, kcal: 121 },
        { name: "–¢–≤–æ—Ä–æ–≥ 9%", protein: 16, fat: 9, carbs: 2, kcal: 159 },
        { name: "–¢–≤–æ—Ä–æ–≥ –º—è–≥–∫–∏–π 0%", protein: 11, fat: 0.1, carbs: 3.5, kcal: 60 },
        { name: "–¢–≤–æ—Ä–æ–≥ –º—è–≥–∫–∏–π 5%", protein: 10, fat: 5, carbs: 3.5, kcal: 100 },
        { name: "–¢–≤–æ—Ä–æ–≥ –∑–µ—Ä–Ω–µ–Ω—ã–π (—Å–ª–∏–≤–∫–∏)", protein: 13, fat: 5, carbs: 2.8, kcal: 105 },
        { name: "–ú–æ–ª–æ–∫–æ 1.5%", protein: 2.9, fat: 1.5, carbs: 4.7, kcal: 44 },
        { name: "–ú–æ–ª–æ–∫–æ 2.5%", protein: 2.9, fat: 2.5, carbs: 4.8, kcal: 54 },
        { name: "–ú–æ–ª–æ–∫–æ 3.2%", protein: 2.9, fat: 3.2, carbs: 4.7, kcal: 60 },
        { name: "–ö–µ—Ñ–∏—Ä 1%", protein: 2.8, fat: 1, carbs: 4, kcal: 40 },
        { name: "–ö–µ—Ñ–∏—Ä 2.5%", protein: 2.8, fat: 2.5, carbs: 4, kcal: 53 },
        { name: "–†—è–∂–µ–Ω–∫–∞ 2.5%", protein: 2.9, fat: 2.5, carbs: 4.2, kcal: 54 },
        { name: "–†—è–∂–µ–Ω–∫–∞ 4%", protein: 2.8, fat: 4, carbs: 4.2, kcal: 67 },
        { name: "–ô–æ–≥—É—Ä—Ç –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π (–≥—Ä–µ—á–µ—Å–∫–∏–π)", protein: 8, fat: 2, carbs: 3.5, kcal: 66 },
        { name: "–ô–æ–≥—É—Ä—Ç –ø–∏—Ç—å–µ–≤–æ–π –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π", protein: 3, fat: 2.5, carbs: 4.5, kcal: 52 },
        { name: "–°–º–µ—Ç–∞–Ω–∞ 10%", protein: 3, fat: 10, carbs: 2.9, kcal: 115 },
        { name: "–°–º–µ—Ç–∞–Ω–∞ 15%", protein: 2.6, fat: 15, carbs: 3, kcal: 160 },
        { name: "–°–º–µ—Ç–∞–Ω–∞ 20%", protein: 2.5, fat: 20, carbs: 3.4, kcal: 206 },
        { name: "–°—ã—Ä –†–æ—Å—Å–∏–π—Å–∫–∏–π", protein: 24.1, fat: 29.5, carbs: 0.3, kcal: 363 },
        { name: "–°—ã—Ä –ì–æ–ª–ª–∞–Ω–¥—Å–∫–∏–π", protein: 26, fat: 26.8, carbs: 0, kcal: 352 },
        { name: "–°—ã—Ä –ì–∞—É–¥–∞", protein: 25, fat: 27, carbs: 2, kcal: 356 },
        { name: "–°—ã—Ä –ú–∞–∞—Å–¥–∞–º", protein: 23, fat: 26, carbs: 0, kcal: 350 },
        { name: "–°—ã—Ä –ü–∞—Ä–º–µ–∑–∞–Ω", protein: 35, fat: 25, carbs: 0, kcal: 392 },
        { name: "–°—ã—Ä –ú–æ—Ü–∞—Ä–µ–ª–ª–∞ (—à–∞—Ä–∏–∫–∏)", protein: 18, fat: 18, carbs: 2, kcal: 240 },
        { name: "–°—ã—Ä –ú–æ—Ü–∞—Ä–µ–ª–ª–∞ (—Ç–≤–µ—Ä–¥–∞—è)", protein: 24, fat: 22, carbs: 0, kcal: 300 },
        { name: "–°—ã—Ä –ê–¥—ã–≥–µ–π—Å–∫–∏–π", protein: 19, fat: 14, carbs: 1.5, kcal: 240 },
        { name: "–°—ã—Ä –§–µ—Ç–∞/–ë—Ä—ã–Ω–∑–∞", protein: 14, fat: 21, carbs: 0, kcal: 260 },
        { name: "–°—ã—Ä –°—É–ª—É–≥—É–Ω–∏", protein: 20, fat: 22, carbs: 0, kcal: 290 },
        { name: "–°—ã—Ä –†–∏–∫–æ—Ç—Ç–∞", protein: 11, fat: 13, carbs: 3, kcal: 174 },
        { name: "–°—ã—Ä –¢–æ—Ñ—É (—Å–æ–µ–≤—ã–π)", protein: 8, fat: 4.8, carbs: 1.9, kcal: 76 },
        { name: "–ú–∞—Å–ª–æ —Å–ª–∏–≤–æ—á–Ω–æ–µ 82.5%", protein: 0.6, fat: 82.5, carbs: 0.8, kcal: 748 },
        { name: "–ú–∞—Å–ª–æ –ì—Ö–∏ (—Ç–æ–ø–ª–µ–Ω–æ–µ)", protein: 0.2, fat: 99, carbs: 0, kcal: 892 },

        // --- –û–í–û–©–ò, –ì–†–ò–ë–´ –ò –ó–ï–õ–ï–ù–¨ (–°–≤–µ–∂–∏–µ) ---
        { name: "–û–≥—É—Ä–µ—Ü", protein: 0.8, fat: 0.1, carbs: 2.8, kcal: 15 },
        { name: "–ü–æ–º–∏–¥–æ—Ä", protein: 0.6, fat: 0.2, carbs: 4.2, kcal: 20 },
        { name: "–ü–æ–º–∏–¥–æ—Ä—ã –ß–µ—Ä—Ä–∏", protein: 0.8, fat: 0.2, carbs: 3, kcal: 18 },
        { name: "–ü–µ—Ä–µ—Ü –±–æ–ª–≥–∞—Ä—Å–∫–∏–π –∫—Ä–∞—Å–Ω—ã–π", protein: 1.3, fat: 0.1, carbs: 5.3, kcal: 27 },
        { name: "–ü–µ—Ä–µ—Ü –±–æ–ª–≥–∞—Ä—Å–∫–∏–π –∂–µ–ª—Ç—ã–π", protein: 1.3, fat: 0.1, carbs: 5.2, kcal: 27 },
        { name: "–ü–µ—Ä–µ—Ü –±–æ–ª–≥–∞—Ä—Å–∫–∏–π –∑–µ–ª–µ–Ω—ã–π", protein: 1.3, fat: 0.1, carbs: 4.7, kcal: 26 },
        { name: "–ö–∞–±–∞—á–æ–∫", protein: 0.6, fat: 0.3, carbs: 4.6, kcal: 24 },
        { name: "–ë–∞–∫–ª–∞–∂–∞–Ω", protein: 1.2, fat: 0.1, carbs: 4.5, kcal: 24 },
        { name: "–ö–∞–ø—É—Å—Ç–∞ –±–µ–ª–æ–∫–æ—á–∞–Ω–Ω–∞—è", protein: 1.8, fat: 0.1, carbs: 4.7, kcal: 27 },
        { name: "–ö–∞–ø—É—Å—Ç–∞ –ø–µ–∫–∏–Ω—Å–∫–∞—è", protein: 1.2, fat: 0.2, carbs: 2.0, kcal: 16 },
        { name: "–ö–∞–ø—É—Å—Ç–∞ —Ü–≤–µ—Ç–Ω–∞—è", protein: 2.5, fat: 0.3, carbs: 5.4, kcal: 30 },
        { name: "–ë—Ä–æ–∫–∫–æ–ª–∏", protein: 2.8, fat: 0.4, carbs: 6.6, kcal: 34 },
        { name: "–ë—Ä—é—Å—Å–µ–ª—å—Å–∫–∞—è –∫–∞–ø—É—Å—Ç–∞", protein: 3.8, fat: 0.3, carbs: 5.9, kcal: 43 },
        { name: "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å", protein: 2, fat: 0.4, carbs: 16.3, kcal: 77 },
        { name: "–ë–∞—Ç–∞—Ç (—Å–ª–∞–¥–∫–∏–π –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å)", protein: 1.6, fat: 0.1, carbs: 20, kcal: 86 },
        { name: "–ú–æ—Ä–∫–æ–≤—å", protein: 1.3, fat: 0.1, carbs: 6.9, kcal: 32 },
        { name: "–°–≤–µ–∫–ª–∞", protein: 1.5, fat: 0.1, carbs: 8.8, kcal: 43 },
        { name: "–õ—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π", protein: 1.4, fat: 0.2, carbs: 8.2, kcal: 41 },
        { name: "–õ—É–∫ –∑–µ–ª–µ–Ω—ã–π", protein: 1.3, fat: 0, carbs: 4.6, kcal: 19 },
        { name: "–ß–µ—Å–Ω–æ–∫", protein: 6.5, fat: 0.5, carbs: 29.9, kcal: 149 },
        { name: "–†–µ–¥–∏—Å", protein: 1.2, fat: 0.1, carbs: 3.4, kcal: 19 },
        { name: "–†–µ–¥—å–∫–∞", protein: 1.9, fat: 0.2, carbs: 6.7, kcal: 36 },
        { name: "–¢—ã–∫–≤–∞", protein: 1, fat: 0.1, carbs: 4.4, kcal: 22 },
        { name: "–°–µ–ª—å–¥–µ—Ä–µ–π (—Å—Ç–µ–±–µ–ª—å)", protein: 0.9, fat: 0.1, carbs: 2.1, kcal: 13 },
        { name: "–®–ø–∏–Ω–∞—Ç", protein: 2.9, fat: 0.3, carbs: 2, kcal: 23 },
        { name: "–†—É–∫–∫–æ–ª–∞", protein: 2.6, fat: 0.7, carbs: 2.1, kcal: 25 },
        { name: "–°–∞–ª–∞—Ç –ê–π—Å–±–µ—Ä–≥", protein: 0.9, fat: 0.1, carbs: 1.8, kcal: 14 },
        { name: "–°–∞–ª–∞—Ç –õ–∏—Å—Ç–æ–≤–æ–π", protein: 1.2, fat: 0.3, carbs: 1.3, kcal: 15 },
        { name: "–°–ø–∞—Ä–∂–∞", protein: 2.2, fat: 0.1, carbs: 3.9, kcal: 20 },
        { name: "–§–∞—Å–æ–ª—å —Å—Ç—Ä—É—á–∫–æ–≤–∞—è", protein: 2, fat: 0.2, carbs: 3.6, kcal: 24 },
        { name: "–ó–µ–ª–µ–Ω—ã–π –≥–æ—Ä–æ—à–µ–∫ (—Å–≤–µ–∂–∏–π)", protein: 5, fat: 0.2, carbs: 13, kcal: 73 },
        { name: "–ö—É–∫—É—Ä—É–∑–∞ (–∑–µ—Ä–Ω–∞)", protein: 3.5, fat: 2.8, carbs: 15.6, kcal: 101 },
        { name: "–®–∞–º–ø–∏–Ω—å–æ–Ω—ã", protein: 4.3, fat: 1, carbs: 0.1, kcal: 27 },
        { name: "–í–µ—à–µ–Ω–∫–∏", protein: 3.3, fat: 0.4, carbs: 4.2, kcal: 33 },
        { name: "–ë–µ–ª—ã–µ –≥—Ä–∏–±—ã", protein: 3.7, fat: 1.7, carbs: 1.1, kcal: 34 },
        { name: "–ê–≤–æ–∫–∞–¥–æ", protein: 2, fat: 14.7, carbs: 1.8, kcal: 160 },
        { name: "–ú–∞—Å–ª–∏–Ω—ã/–û–ª–∏–≤–∫–∏", protein: 1, fat: 11, carbs: 5, kcal: 115 },

        // --- –§–†–£–ö–¢–´ –ò –Ø–ì–û–î–´ ---
        { name: "–Ø–±–ª–æ–∫–æ", protein: 0.4, fat: 0.4, carbs: 9.8, kcal: 47 },
        { name: "–ì—Ä—É—à–∞", protein: 0.4, fat: 0.3, carbs: 10.3, kcal: 47 },
        { name: "–ë–∞–Ω–∞–Ω", protein: 1.5, fat: 0.5, carbs: 21, kcal: 96 },
        { name: "–ê–ø–µ–ª—å—Å–∏–Ω", protein: 0.9, fat: 0.2, carbs: 8.1, kcal: 43 },
        { name: "–ú–∞–Ω–¥–∞—Ä–∏–Ω", protein: 0.8, fat: 0.2, carbs: 7.5, kcal: 38 },
        { name: "–ì—Ä–µ–π–ø—Ñ—Ä—É—Ç", protein: 0.7, fat: 0.2, carbs: 6.5, kcal: 35 },
        { name: "–õ–∏–º–æ–Ω", protein: 0.9, fat: 0.1, carbs: 3, kcal: 34 },
        { name: "–õ–∞–π–º", protein: 0.7, fat: 0.2, carbs: 7.7, kcal: 30 },
        { name: "–ö–∏–≤–∏", protein: 1.1, fat: 0.5, carbs: 14.7, kcal: 61 },
        { name: "–ü–µ—Ä—Å–∏–∫", protein: 0.9, fat: 0.1, carbs: 9.5, kcal: 45 },
        { name: "–ù–µ–∫—Ç–∞—Ä–∏–Ω", protein: 1.1, fat: 0.3, carbs: 10.5, kcal: 44 },
        { name: "–ê–±—Ä–∏–∫–æ—Å", protein: 0.9, fat: 0.1, carbs: 9, kcal: 44 },
        { name: "–°–ª–∏–≤–∞", protein: 0.8, fat: 0.3, carbs: 9.6, kcal: 49 },
        { name: "–•—É—Ä–º–∞", protein: 0.5, fat: 0.4, carbs: 15.3, kcal: 67 },
        { name: "–í–∏–Ω–æ–≥—Ä–∞–¥ –∑–µ–ª–µ–Ω—ã–π", protein: 0.6, fat: 0.2, carbs: 16, kcal: 69 },
        { name: "–í–∏–Ω–æ–≥—Ä–∞–¥ —á–µ—Ä–Ω—ã–π", protein: 0.6, fat: 0.2, carbs: 17, kcal: 72 },
        { name: "–ê–Ω–∞–Ω–∞—Å", protein: 0.4, fat: 0.2, carbs: 11.8, kcal: 52 },
        { name: "–ú–∞–Ω–≥–æ", protein: 0.5, fat: 0.3, carbs: 15, kcal: 65 },
        { name: "–î—ã–Ω—è", protein: 0.6, fat: 0.3, carbs: 7.4, kcal: 35 },
        { name: "–ê—Ä–±—É–∑", protein: 0.6, fat: 0.1, carbs: 5.8, kcal: 27 },
        { name: "–ö–ª—É–±–Ω–∏–∫–∞", protein: 0.8, fat: 0.4, carbs: 5.7, kcal: 41 },
        { name: "–ú–∞–ª–∏–Ω–∞", protein: 0.8, fat: 0.5, carbs: 8.3, kcal: 46 },
        { name: "–°–º–æ—Ä–æ–¥–∏–Ω–∞ —á–µ—Ä–Ω–∞—è", protein: 1, fat: 0.4, carbs: 7.3, kcal: 44 },
        { name: "–ß–µ—Ä–Ω–∏–∫–∞", protein: 1.1, fat: 0.4, carbs: 7.6, kcal: 44 },
        { name: "–ì–æ–ª—É–±–∏–∫–∞", protein: 1, fat: 0.5, carbs: 6.5, kcal: 39 },
        { name: "–í–∏—à–Ω—è", protein: 0.8, fat: 0.2, carbs: 10.6, kcal: 52 },
        { name: "–ß–µ—Ä–µ—à–Ω—è", protein: 1.1, fat: 0.4, carbs: 10.6, kcal: 52 },
        { name: "–ö–ª—é–∫–≤–∞", protein: 0.5, fat: 0.2, carbs: 3.7, kcal: 26 },
        { name: "–ì—Ä–∞–Ω–∞—Ç", protein: 0.7, fat: 0.6, carbs: 14.5, kcal: 72 },
        { name: "–ü–æ–º–µ–ª–æ", protein: 0.8, fat: 0, carbs: 9.6, kcal: 38 },
        { name: "–ò–Ω–∂–∏—Ä —Å–≤–µ–∂–∏–π", protein: 0.7, fat: 0.2, carbs: 12, kcal: 54 },

        // --- –û–†–ï–•–ò, –°–ï–ú–ï–ù–ê, –°–£–•–û–§–†–£–ö–¢–´ ---
        { name: "–ì—Ä–µ—Ü–∫–∏–π –æ—Ä–µ—Ö", protein: 15.2, fat: 65.2, carbs: 7, kcal: 654 },
        { name: "–ú–∏–Ω–¥–∞–ª—å", protein: 18.6, fat: 57.7, carbs: 13, kcal: 645 },
        { name: "–§—É–Ω–¥—É–∫", protein: 16.1, fat: 66.9, carbs: 9.9, kcal: 704 },
        { name: "–ö–µ—à—å—é", protein: 25.7, fat: 54.1, carbs: 13.2, kcal: 643 },
        { name: "–ê—Ä–∞—Ö–∏—Å", protein: 26.3, fat: 45.2, carbs: 9.9, kcal: 551 },
        { name: "–§–∏—Å—Ç–∞—à–∫–∏", protein: 20, fat: 50, carbs: 7, kcal: 556 },
        { name: "–ö–µ–¥—Ä–æ–≤—ã–π –æ—Ä–µ—Ö", protein: 13.7, fat: 68.4, carbs: 13.1, kcal: 673 },
        { name: "–ë—Ä–∞–∑–∏–ª—å—Å–∫–∏–π –æ—Ä–µ—Ö", protein: 14, fat: 66, carbs: 4.8, kcal: 656 },
        { name: "–°–µ–º–µ—á–∫–∏ –ø–æ–¥—Å–æ–ª–Ω—É—Ö–∞", protein: 20.7, fat: 52.9, carbs: 3.4, kcal: 578 },
        { name: "–°–µ–º–µ—á–∫–∏ —Ç—ã–∫–≤–µ–Ω–Ω—ã–µ", protein: 24.5, fat: 45.8, carbs: 4.7, kcal: 556 },
        { name: "–ö—É–Ω–∂—É—Ç", protein: 19.4, fat: 48.7, carbs: 12.2, kcal: 565 },
        { name: "–°–µ–º–µ–Ω–∞ –ª—å–Ω–∞", protein: 18, fat: 42, carbs: 1.6, kcal: 534 },
        { name: "–°–µ–º–µ–Ω–∞ —á–∏–∞", protein: 16.5, fat: 30.7, carbs: 42, kcal: 486 },
        { name: "–ú–∞–∫", protein: 17.5, fat: 47.5, carbs: 14.5, kcal: 556 },
        { name: "–ö–æ–∫–æ—Å (–º—è–∫–æ—Ç—å)", protein: 3.3, fat: 33.5, carbs: 6.2, kcal: 354 },
        { name: "–ò–∑—é–º", protein: 2.9, fat: 0.6, carbs: 66, kcal: 264 },
        { name: "–ö—É—Ä–∞–≥–∞", protein: 5.2, fat: 0.3, carbs: 51, kcal: 215 },
        { name: "–ß–µ—Ä–Ω–æ—Å–ª–∏–≤", protein: 2.3, fat: 0.7, carbs: 57.5, kcal: 231 },
        { name: "–§–∏–Ω–∏–∫–∏", protein: 2.5, fat: 0.5, carbs: 69.2, kcal: 274 },
        { name: "–ò–Ω–∂–∏—Ä —Å—É—à–µ–Ω—ã–π", protein: 3.1, fat: 0.8, carbs: 57.9, kcal: 257 },
        { name: "–Ø–±–ª–æ–∫–∏ —Å—É—à–µ–Ω—ã–µ", protein: 2.2, fat: 0.1, carbs: 59, kcal: 231 },

        // --- –•–õ–ï–ë –ò –•–õ–ï–ë–¶–´ ---
        { name: "–•–ª–µ–± –ø—à–µ–Ω–∏—á–Ω—ã–π (–±–µ–ª—ã–π)", protein: 8.1, fat: 1.3, carbs: 48.8, kcal: 242 },
        { name: "–•–ª–µ–± —Ä–∂–∞–Ω–æ–π (—á–µ—Ä–Ω—ã–π)", protein: 6.6, fat: 1.2, carbs: 33.4, kcal: 174 },
        { name: "–•–ª–µ–± –ë–æ—Ä–æ–¥–∏–Ω—Å–∫–∏–π", protein: 6.8, fat: 1.3, carbs: 40.7, kcal: 208 },
        { name: "–•–ª–µ–± —Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤–æ–π", protein: 9, fat: 2.5, carbs: 42, kcal: 230 },
        { name: "–•–ª–µ–±—Ü—ã –≥—Ä–µ—á–Ω–µ–≤—ã–µ", protein: 14, fat: 2.5, carbs: 60, kcal: 320 },
        { name: "–•–ª–µ–±—Ü—ã —Ä–∏—Å–æ–≤—ã–µ", protein: 8, fat: 2, carbs: 75, kcal: 350 },
        { name: "–õ–∞–≤–∞—à –∞—Ä–º—è–Ω—Å–∫–∏–π (—Ç–æ–Ω–∫–∏–π)", protein: 7.9, fat: 1, carbs: 47.6, kcal: 236 },
        { name: "–¢–æ—Ä—Ç–∏–ª—å—è –ø—à–µ–Ω–∏—á–Ω–∞—è", protein: 8, fat: 8, carbs: 50, kcal: 300 },
        { name: "–ë–∞—Ç–æ–Ω –Ω–∞—Ä–µ–∑–Ω–æ–π", protein: 7.5, fat: 2.9, carbs: 51.4, kcal: 264 },

        // --- –ú–ê–°–õ–ê, –°–û–£–°–´, –°–õ–ê–î–û–°–¢–ò ---
        { name: "–ú–∞—Å–ª–æ –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–æ–µ", protein: 0, fat: 99.9, carbs: 0, kcal: 899 },
        { name: "–ú–∞—Å–ª–æ –æ–ª–∏–≤–∫–æ–≤–æ–µ", protein: 0, fat: 99.8, carbs: 0, kcal: 898 },
        { name: "–ú–∞—Å–ª–æ –ª—å–Ω—è–Ω–æ–µ", protein: 0, fat: 99.8, carbs: 0, kcal: 898 },
        { name: "–ú–∞—Å–ª–æ –∫–æ–∫–æ—Å–æ–≤–æ–µ", protein: 0, fat: 99.9, carbs: 0, kcal: 899 },
        { name: "–°–æ–µ–≤—ã–π —Å–æ—É—Å", protein: 6, fat: 0, carbs: 6, kcal: 50 },
        { name: "–¢–æ–º–∞—Ç–Ω–∞—è –ø–∞—Å—Ç–∞", protein: 4.8, fat: 0, carbs: 19, kcal: 102 },
        { name: "–ú–µ–¥", protein: 0.8, fat: 0, carbs: 80.3, kcal: 328 },
        { name: "–°–∞—Ö–∞—Ä", protein: 0, fat: 0, carbs: 99.7, kcal: 398 },
        { name: "–®–æ–∫–æ–ª–∞–¥ –≥–æ—Ä—å–∫–∏–π 70%+", protein: 8, fat: 39, carbs: 35, kcal: 530 },
        { name: "–®–æ–∫–æ–ª–∞–¥ –º–æ–ª–æ—á–Ω—ã–π", protein: 6, fat: 32, carbs: 54, kcal: 540 },
        { name: "–ü–∞—Å—Ç–∏–ª–∞", protein: 0.5, fat: 0, carbs: 80, kcal: 324 },
        { name: "–ó–µ—Ñ–∏—Ä", protein: 0.8, fat: 0.1, carbs: 79, kcal: 326 },
        { name: "–ö–∞–∫–∞–æ –ø–æ—Ä–æ—à–æ–∫", protein: 24, fat: 15, carbs: 10, kcal: 289 },
        { name: "–ü—Ä–æ—Ç–µ–∏–Ω (Whey)", protein: 75, fat: 5, carbs: 5, kcal: 370 },

        // --- –ù–ê–ü–ò–¢–ö–ò ---
        { name: "–í–æ–¥–∞", protein: 0.0, fat: 0.0, carbs: 0.0, kcal: 0 },
        { name: "–ß–∞–π (–±–µ–∑ —Å–∞—Ö–∞—Ä–∞)", protein: 0.0, fat: 0.0, carbs: 0.0, kcal: 0 },
        { name: "–ö–æ—Ñ–µ (–±–µ–∑ —Å–∞—Ö–∞—Ä–∞)", protein: 0.2, fat: 0.0, carbs: 0.0, kcal: 2 },
        { name: "–ö–∞–ø—É—á–∏–Ω–æ (–±–µ–∑ —Å–∞—Ö–∞—Ä–∞)", protein: 1.8, fat: 1.5, carbs: 3.8, kcal: 35 },
        { name: "–õ–∞—Ç—Ç–µ (–±–µ–∑ —Å–∞—Ö–∞—Ä–∞)", protein: 2.8, fat: 2.0, carbs: 4.7, kcal: 45 },
        { name: "–¶–∏–∫–æ—Ä–∏–π (–Ω–∞–ø–∏—Ç–æ–∫)", protein: 0.1, fat: 0.0, carbs: 2.8, kcal: 11 },
        { name: "–ö–∞–∫–∞–æ –Ω–∞ –º–æ–ª–æ–∫–µ", protein: 3.5, fat: 3.0, carbs: 10.0, kcal: 80 },
        { name: "–°–æ–∫ –ê–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π (—Å–≤–µ–∂–µ–≤—ã–∂–∞—Ç—ã–π)", protein: 0.7, fat: 0.2, carbs: 13.0, kcal: 60 },
        { name: "–°–æ–∫ –ê–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π (–ø–∞–∫–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)", protein: 0.0, fat: 0.0, carbs: 12.0, kcal: 50 },
        { name: "–°–æ–∫ –Ø–±–ª–æ—á–Ω—ã–π (—Å–≤–µ–∂–µ–≤—ã–∂–∞—Ç—ã–π)", protein: 0.5, fat: 0.0, carbs: 14.0, kcal: 60 },
        { name: "–°–æ–∫ –Ø–±–ª–æ—á–Ω—ã–π (–ø–∞–∫–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)", protein: 0.0, fat: 0.0, carbs: 11.5, kcal: 46 },
        { name: "–°–æ–∫ –¢–æ–º–∞—Ç–Ω—ã–π", protein: 1.0, fat: 0.0, carbs: 3.5, kcal: 20 },
        { name: "–°–æ–∫ –ì—Ä–µ–π–ø—Ñ—Ä—É—Ç–æ–≤—ã–π", protein: 0.5, fat: 0.0, carbs: 9.0, kcal: 38 },
        { name: "–ú–æ—Ä—Å –ö–ª—é–∫–≤–µ–Ω–Ω—ã–π", protein: 0.0, fat: 0.0, carbs: 12.0, kcal: 50 },
        { name: "–ö–æ–º–ø–æ—Ç –∏–∑ —Å—É—Ö–æ—Ñ—Ä—É–∫—Ç–æ–≤ (–±–µ–∑ —Å–∞—Ö–∞—Ä–∞)", protein: 0.5, fat: 0.0, carbs: 15.0, kcal: 60 },
        { name: "–ö–≤–∞—Å —Ö–ª–µ–±–Ω—ã–π", protein: 0.2, fat: 0.0, carbs: 5.2, kcal: 27 },
        { name: "–ú–æ–ª–æ–∫–æ –ú–∏–Ω–¥–∞–ª—å–Ω–æ–µ", protein: 0.5, fat: 1.2, carbs: 0.1, kcal: 13 },
        { name: "–ú–æ–ª–æ–∫–æ –ö–æ–∫–æ—Å–æ–≤–æ–µ (–Ω–∞–ø–∏—Ç–æ–∫)", protein: 0.2, fat: 2.0, carbs: 2.0, kcal: 25 },
        { name: "–ú–æ–ª–æ–∫–æ –û–≤—Å—è–Ω–æ–µ", protein: 1.0, fat: 1.5, carbs: 6.5, kcal: 45 },
        { name: "–ú–æ–ª–æ–∫–æ –°–æ–µ–≤–æ–µ", protein: 3.0, fat: 1.5, carbs: 1.0, kcal: 33 },
        { name: "–í–∏–Ω–æ –°—É—Ö–æ–µ (–∫—Ä–∞—Å–Ω–æ–µ/–±–µ–ª–æ–µ)", protein: 0.2, fat: 0.0, carbs: 0.6, kcal: 70 },
        { name: "–í–∏–Ω–æ –ü–æ–ª—É—Å–ª–∞–¥–∫–æ–µ", protein: 0.2, fat: 0.0, carbs: 5.0, kcal: 90 },
        { name: "–ü–∏–≤–æ –°–≤–µ—Ç–ª–æ–µ", protein: 0.5, fat: 0.0, carbs: 4.6, kcal: 43 }
    ];

    // --- State ---
    let state = {
        products: [], // { id, name, weight }
        cookedWeight: null
    };

    // --- DOM Elements ---
    const listContainer = document.getElementById('products-list');
    const addBtn = document.getElementById('add-btn');
    const cookedWeightInput = document.getElementById('cooked-weight');

    // Totals Elements
    const elTotalRawWeight = document.getElementById('total-raw-weight');
    const elTotalKcal = document.getElementById('total-kcal');
    const elTotalP = document.getElementById('total-p');
    const elTotalF = document.getElementById('total-f');
    const elTotalC = document.getElementById('total-c');

    // Final Elements
    const elFinalKcal = document.getElementById('final-kcal');
    const elFinalP = document.getElementById('final-p');
    const elFinalF = document.getElementById('final-f');
    const elFinalC = document.getElementById('final-c');

    // --- Logic ---

    function generateId() {
        return Math.random().toString(36).substr(2, 9);
    }

    function init() {
        loadStateFromURL();
        if (state.products.length === 0) {
            addProductRow(); // Add one empty row by default
        } else {
            renderRows();
        }
        updateCalculation();
    }

    function addProductRow(data = { name: '', weight: 100 }) {
        const id = generateId();
        state.products.push({ id, ...data });
        renderRow(state.products[state.products.length - 1]);
        updateCalculation();
        
        // Focus new input
        setTimeout(() => {
            const row = document.getElementById(`row-${id}`);
            if (row) {
                const input = row.querySelector('.input-name');
                if (input) input.focus();
            }
        }, 0);
    }

    function removeProductRow(id) {
        state.products = state.products.filter(p => p.id !== id);
        const row = document.getElementById(`row-${id}`);
        if (row) row.remove();
        updateCalculation();
    }

    function updateProductData(id, key, value) {
        const product = state.products.find(p => p.id === id);
        if (product) {
            product[key] = value;
            updateRowCalculations(id);
            updateCalculation(); // Update totals
        }
    }

    function parseNutrients(name) {
        // Normalize
        const cleanName = name.trim();
        
        // Regex 1: Exact values "Name (Kcal/P/F/C)" e.g. "Soup (150/5/3/10)"
        // Allow spaces, float numbers
        const regexExact = /(?:.*)\(\s*(\d+(?:\.\d+)?)\s*\/\s*(\d+(?:\.\d+)?)\s*\/\s*(\d+(?:\.\d+)?)\s*\/\s*(\d+(?:\.\d+)?)\s*\)$/;
        const matchExact = cleanName.match(regexExact);

        if (matchExact) {
            return {
                kcal: parseFloat(matchExact[1]),
                protein: parseFloat(matchExact[2]),
                fat: parseFloat(matchExact[3]),
                carbs: parseFloat(matchExact[4]),
                isApproximate: false,
                isCustom: true
            };
        }

        // Regex 2: Scaled Kcal "Name (Kcal)" e.g. "Apple (60)"
        const regexScale = /(.*?)\s*\(\s*(\d+(?:\.\d+)?)\s*\)$/;
        const matchScale = cleanName.match(regexScale);

        if (matchScale) {
            const baseName = matchScale[1].trim();
            const targetKcal = parseFloat(matchScale[2]);
            
            // Try to find base product in DB
            const dbProduct = DB.find(p => p.name.toLowerCase() === baseName.toLowerCase());

            if (dbProduct) {
                // Scale existing nutrients
                // Avoid division by zero
                const ratio = dbProduct.kcal > 0 ? targetKcal / dbProduct.kcal : 0;
                return {
                    kcal: targetKcal,
                    protein: dbProduct.protein * ratio,
                    fat: dbProduct.fat * ratio,
                    carbs: dbProduct.carbs * ratio,
                    isApproximate: true, // Mark as calculated/scaled
                    isCustom: true
                };
            } else {
                // Not found, just return Kcal with 0 macros
                return {
                    kcal: targetKcal,
                    protein: 0,
                    fat: 0,
                    carbs: 0,
                    isApproximate: true,
                    isCustom: true
                };
            }
        }

        // Standard DB Lookup
        const dbProduct = DB.find(p => p.name.toLowerCase() === cleanName.toLowerCase());
        if (dbProduct) {
            return { ...dbProduct, isApproximate: false, isCustom: false };
        }

        // Not found
        return { kcal: 0, protein: 0, fat: 0, carbs: 0, isApproximate: false, isCustom: false };
    }

    function updateRowCalculations(id) {
        const product = state.products.find(p => p.id === id);
        if (!product) return;

        const row = document.getElementById(`row-${id}`);
        if (!row) return;

        const nutrients = parseNutrients(product.name);
        const weight = parseFloat(product.weight) || 0;
        const ratio = weight / 100;

        const elKcal = row.querySelector('.col-kcal');
        const elP = row.querySelector('.col-p');
        const elF = row.querySelector('.col-f');
        const elC = row.querySelector('.col-c');

        // Calculate values
        const valKcal = nutrients.kcal * ratio;
        const valP = nutrients.protein * ratio;
        const valF = nutrients.fat * ratio;
        const valC = nutrients.carbs * ratio;

        // Update DOM
        elKcal.value = valKcal.toFixed(1);
        elP.value = valP.toFixed(1);
        elF.value = valF.toFixed(1);
        elC.value = valC.toFixed(1);

        // Styling for approximate values
        if (nutrients.isApproximate) {
            [elKcal, elP, elF, elC].forEach(el => el.classList.add('warning'));
        } else {
            [elKcal, elP, elF, elC].forEach(el => el.classList.remove('warning'));
        }
        
        // Store calculated totals in DOM element data for easy summing (or recalculate from state)
        // We will recalculate from state in updateCalculation to be safe
    }

    function updateCalculation() {
        let totalRawWeight = 0;
        let totalKcal = 0;
        let totalP = 0;
        let totalF = 0;
        let totalC = 0;

        state.products.forEach(p => {
            const nutrients = parseNutrients(p.name);
            const weight = parseFloat(p.weight) || 0;
            const ratio = weight / 100;

            totalRawWeight += weight;
            totalKcal += nutrients.kcal * ratio;
            totalP += nutrients.protein * ratio;
            totalF += nutrients.fat * ratio;
            totalC += nutrients.carbs * ratio;
        });

        // Update Raw Totals UI
        elTotalRawWeight.textContent = totalRawWeight.toFixed(0) + ' –≥';
        elTotalKcal.textContent = totalKcal.toFixed(1);
        elTotalP.textContent = totalP.toFixed(1);
        elTotalF.textContent = totalF.toFixed(1);
        elTotalC.textContent = totalC.toFixed(1);

        // Handle Cooked Weight
        const cookedWeight = parseFloat(state.cookedWeight);
        const finalWeight = (cookedWeight && cookedWeight > 0) ? cookedWeight : totalRawWeight;

        // Display cooked weight input value if exists
        if (state.cookedWeight !== null && cookedWeightInput.value !== String(state.cookedWeight)) {
             // Only update input if it differs (avoid cursor jumps) - actually handle via input event
        }

        // Calculate Final Per 100g
        // (TotalNutrient / FinalWeight) * 100
        if (finalWeight > 0) {
            const factor = 100 / finalWeight;
            elFinalKcal.textContent = (totalKcal * factor).toFixed(1);
            elFinalP.textContent = (totalP * factor).toFixed(1);
            elFinalF.textContent = (totalF * factor).toFixed(1);
            elFinalC.textContent = (totalC * factor).toFixed(1);
        } else {
            elFinalKcal.textContent = '0';
            elFinalP.textContent = '0';
            elFinalF.textContent = '0';
            elFinalC.textContent = '0';
        }

        saveStateToURL();
    }

    // --- Rendering ---

    function renderRows() {
        listContainer.innerHTML = '';
        state.products.forEach(p => renderRow(p));
    }

    function renderRow(product) {
        const div = document.createElement('div');
        div.className = 'grid-container product-row';
        div.id = `row-${product.id}`;
        
        div.innerHTML = `
            <div style="position: relative;">
                <input type="text" class="input-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞" value="${escapeHtml(product.name)}" data-id="${product.id}">
                <div class="autocomplete-items" id="autocomplete-${product.id}"></div>
            </div>
            <input type="number" class="input-weight" placeholder="0" value="${product.weight}" data-id="${product.id}">
            <input type="text" class="col-kcal" readonly value="0">
            <input type="text" class="col-p" readonly value="0">
            <input type="text" class="col-f" readonly value="0">
            <input type="text" class="col-c" readonly value="0">
            <button class="btn-delete" onclick="removeProductRow('${product.id}')">‚úï</button>
        `;

        listContainer.appendChild(div);

        // Attach Listeners
        const nameInput = div.querySelector('.input-name');
        const weightInput = div.querySelector('.input-weight');

        // Name Input
        nameInput.addEventListener('input', (e) => {
            updateProductData(product.id, 'name', e.target.value);
            handleAutocomplete(e.target, product.id);
        });

        // Close autocomplete when clicking outside
        document.addEventListener('click', function (e) {
            if (e.target !== nameInput) {
                closeAutocomplete(product.id);
            }
        });

        // Weight Input
        weightInput.addEventListener('input', (e) => {
            updateProductData(product.id, 'weight', parseFloat(e.target.value));
        });

        // Initial Calc for this row
        updateRowCalculations(product.id);
    }

    // --- Autocomplete ---

    function handleAutocomplete(input, id) {
        const val = input.value;
        closeAutocomplete(id);
        if (!val) return;

        const list = document.getElementById(`autocomplete-${id}`);
        let matches = DB.filter(p => p.name.toLowerCase().includes(val.toLowerCase()));

        if (matches.length === 0) return;

        matches.forEach(match => {
            const item = document.createElement('div');
            // Highlight matching part
            const regex = new RegExp(`(${val})`, "gi");
            item.innerHTML = match.name.replace(regex, "<strong>$1</strong>");
            item.innerHTML += `<span style="font-size: 0.8em; color: #888; float: right;">${match.kcal} –∫–∫–∞–ª</span>`;
            
            item.addEventListener('click', function() {
                input.value = match.name;
                updateProductData(id, 'name', match.name);
                closeAutocomplete(id);
            });
            list.appendChild(item);
        });
    }

    function closeAutocomplete(id) {
        const list = document.getElementById(`autocomplete-${id}`);
        if (list) list.innerHTML = '';
    }

    // --- Cooked Weight ---

    cookedWeightInput.addEventListener('input', (e) => {
        state.cookedWeight = e.target.value ? parseFloat(e.target.value) : null;
        updateCalculation();
    });

    // --- URL State Management ---
    
    // Debounce save
    let saveTimeout;
    function saveStateToURL() {
        clearTimeout(saveTimeout);
        saveTimeout = setTimeout(() => {
            // Filter out purely empty rows to keep URL shorter
            const productsToSave = state.products
                .filter(p => p.name.trim() !== '')
                .map(p => ({ n: p.name, w: p.weight }));

            const data = {
                p: productsToSave,
                cw: state.cookedWeight
            };

            try {
                const json = JSON.stringify(data);
                // Robust UTF-8 to Base64
                const base64 = btoa(unescape(encodeURIComponent(json)));
                
                const url = new URL(window.location);
                url.searchParams.set('data', base64);
                window.history.replaceState({}, '', url.toString());
            } catch (e) {
                console.error("Error saving state:", e);
            }
        }, 500);
    }

    function loadStateFromURL() {
        const params = new URLSearchParams(window.location.search);
        const dataStr = params.get('data');
        if (!dataStr) return;

        try {
            // Robust Base64 to UTF-8
            const json = decodeURIComponent(escape(atob(dataStr)));
            const data = JSON.parse(json);
            
            if (data.p && Array.isArray(data.p)) {
                state.products = data.p.map(item => ({
                    id: generateId(),
                    name: item.n,
                    weight: item.w
                }));
            }
            if (data.cw) {
                state.cookedWeight = data.cw;
                cookedWeightInput.value = data.cw;
            }
        } catch (e) {
            console.error("Failed to parse state from URL:", e);
        }
    }

    function escapeHtml(text) {
        if (!text) return "";
        return text
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;")
            .replace(/'/g, "&#039;");
    }

    // --- Init ---
    addBtn.addEventListener('click', () => addProductRow());
    
    // Help Toggle
    document.getElementById('help-toggle').addEventListener('click', () => {
        const section = document.getElementById('help-section');
        section.style.display = section.style.display === 'none' ? 'block' : 'none';
    });

    // Error Reporting
    document.getElementById('error-toggle').addEventListener('click', () => {
        window.open('https://forms.gle/6YpwyicbQJaTG4yEA', '_blank');
    });

    // Idea Reporting
    document.getElementById('idea-toggle').addEventListener('click', () => {
        window.open('https://forms.gle/txLoacGpFc5qVosp8', '_blank');
    });

    init();
</script>

</body>
</html>
